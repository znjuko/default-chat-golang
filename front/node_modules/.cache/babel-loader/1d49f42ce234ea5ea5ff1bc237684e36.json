{"ast":null,"code":"var _jsxFileName = \"/home/znjuko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/rk2/bmstu_front/default-chat-golang/front/src/pages/Messanger.js\";\nimport React from 'react';\nimport API from '../utils/API';\nimport OnlineUsers from './OnlineUsers';\nimport Chats from './Chats';\nexport default class Messanger extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      chats: [{\n        chatName: 'chat',\n        chatMsg: 'asflasgflksdgaljhsglkdsaglksdglka',\n        chatAuthor: 'Viici'\n      }, {\n        chatName: 'chat',\n        chatMsg: 'asflasgflksdgaljhsglkdsaglksdglka',\n        chatAuthor: 'Viici'\n      }],\n      online: [{\n        login: 'Hello',\n        id: 1\n      }, {\n        login: 'Hello',\n        id: 2\n      }, {\n        login: 'Hello',\n        id: 3\n      }, {\n        login: 'Hello',\n        id: 4\n      }, {\n        login: 'Hello',\n        id: 5\n      }]\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid h-100 mt-2\",\n      style: {\n        minHeight: '90vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row h-100 d-flex justify-content-center\",\n      style: {\n        minHeight: '100vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"h4 mt-2 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }, \"\\u0412\\u0430\\u0448\\u0438 \\u0447\\u0430\\u0442\\u044B\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Chats, {\n      chats: this.state.chats,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col col-md-3 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"h4 mt-2 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438 \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(OnlineUsers, {\n      online: this.state.online,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }))));\n  }\n\n  async componentDidMount() {\n    // Load async data.\n    try {\n      let mainData = await API.get('/chats', {\n        params: {\n          results: 1,\n          inc: 'chats,online'\n        }\n      }); // Парсим резульатты.\n\n      let chatsData = mainData.data.results[0].chats;\n      let onlineData = mainData.data.results[0].online; // Обновляем стейт и ререндерим наш компонент.\n\n      this.setState({ ...this.state,\n        ...{\n          isLoading: false,\n          chats: chatsData,\n          online: onlineData\n        }\n      });\n    } catch (err) {\n      console.log('[DEBUG]: /chats error');\n      const {\n        history\n      } = this.props;\n      history.push('/login');\n    }\n  }\n\n}","map":{"version":3,"sources":["/home/znjuko/Рабочий стол/rk2/bmstu_front/default-chat-golang/front/src/pages/Messanger.js"],"names":["React","API","OnlineUsers","Chats","Messanger","Component","constructor","props","state","isLoading","chats","chatName","chatMsg","chatAuthor","online","login","id","render","minHeight","componentDidMount","mainData","get","params","results","inc","chatsData","data","onlineData","setState","err","console","log","history","push"],"mappings":"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","sourcesContent":["import React from 'react';\nimport API from '../utils/API';\n\nimport OnlineUsers from './OnlineUsers';\nimport Chats from './Chats';\n\nexport default class Messanger extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisLoading: true,\n\t\t\tchats: [\n\t\t\t\t{\n\t\t\t\t\tchatName: 'chat',\n\t\t\t\t\tchatMsg: 'asflasgflksdgaljhsglkdsaglksdglka',\n\t\t\t\t\tchatAuthor: 'Viici',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tchatName: 'chat',\n\t\t\t\t\tchatMsg: 'asflasgflksdgaljhsglkdsaglksdglka',\n\t\t\t\t\tchatAuthor: 'Viici',\n\t\t\t\t},\n\t\t\t],\n\t\t\tonline: [\n\t\t\t\t{ login: 'Hello', id: 1 },\n\t\t\t\t{ login: 'Hello', id: 2 },\n\t\t\t\t{ login: 'Hello', id: 3 },\n\t\t\t\t{ login: 'Hello', id: 4 },\n\t\t\t\t{ login: 'Hello', id: 5 },\n\t\t\t],\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName='container-fluid h-100 mt-2'\n\t\t\t\tstyle={{ minHeight: '90vh' }}>\n\t\t\t\t<div\n\t\t\t\t\tclassName='row h-100 d-flex justify-content-center'\n\t\t\t\t\tstyle={{ minHeight: '100vh' }}>\n\t\t\t\t\t<div className='col-md-6'>\n\t\t\t\t\t\t<h4 className='h4 mt-2 text-left'>Ваши чаты</h4>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<Chats chats={this.state.chats} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='col col-md-3 '>\n\t\t\t\t\t\t<h4 className='h4 mt-2 text-left'>\n\t\t\t\t\t\t\tПользователи онлайн\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<OnlineUsers online={this.state.online} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tasync componentDidMount() {\n\t\t// Load async data.\n\t\ttry {\n\t\t\tlet mainData = await API.get('/chats', {\n\t\t\t\tparams: {\n\t\t\t\t\tresults: 1,\n\t\t\t\t\tinc: 'chats,online',\n\t\t\t\t},\n\t\t\t}); // Парсим резульатты.\n\n\t\t\tlet chatsData = mainData.data.results[0].chats;\n\t\t\tlet onlineData = mainData.data.results[0].online; // Обновляем стейт и ререндерим наш компонент.\n\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\t...{\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\tchats: chatsData,\n\t\t\t\t\tonline: onlineData,\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log('[DEBUG]: /chats error');\n\t\t\tconst { history } = this.props;\n\t\t\thistory.push('/login');\n\t\t}\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}