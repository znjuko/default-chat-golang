{"ast":null,"code":"var _jsxFileName = \"/home/znjuko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/rk2/bmstu_front/default-chat-golang/front/src/pages/OnlineUsers.js\";\nimport React from 'react';\nimport API from '../utils/API';\nimport { Card } from 'shards-react';\nexport default class OnlineUsers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onInputChange = e => {\n      this.setState({\n        chatName: e.target.value\n      });\n    };\n\n    this.onChange = e => {\n      console.log('show1');\n\n      if (e.target.checked) {\n        this.state.users.push(parseInt(e.target.value));\n        console.log('show2');\n        console.log(this.state.users);\n      } else {\n        let index = this.state.users.indexOf(parseInt(e.target.value));\n\n        if (index > -1) {\n          this.state.users.splice(index, 1);\n        }\n\n        console.log('show3');\n        console.log(this.state.users);\n      }\n\n      if (this.state.users.length > 0) {\n        this.setState({\n          showChatCreate: true\n        });\n      } else {\n        this.setState({\n          showChatCreate: false\n        });\n      }\n    };\n\n    this.onCreate = async event => {\n      event.preventDefault(); // get our form data out of state\n\n      const {\n        chatName,\n        users\n      } = this.state;\n\n      try {\n        await API.post('/chats', {\n          chatName,\n          users\n        });\n        const {\n          history\n        } = this.props;\n        history.push('/login');\n        history.push('/chats');\n      } catch (error) {\n        console.log('[DEBUG]: Ответ сервера на /chats');\n        console.log(error.response);\n      }\n    };\n\n    this.state = {\n      users: [],\n      showChatCreate: false,\n      chatName: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list-group form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 5\n      }\n    }, this.props.online.map((user, index) => {\n      return /*#__PURE__*/React.createElement(Card, {\n        key: index,\n        className: \"d-flex mx-auto m-1 text-center p-2 align-middle list-group-item list-group-item-action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"defaultCheck1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 10\n        }\n      }, user.login), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check\",\n        type: \"checkbox\",\n        value: user.id,\n        id: \"defaultCheck1\",\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 10\n        }\n      })));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: `mt-4 d-flex ${this.addChatAdd(this.state.showChatCreate)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0447\\u0430\\u0442\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body text-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0447\\u0430\\u0442\\u0430\",\n      \"aria-label\": \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0447\\u0430\\u0442\\u0430\",\n      \"aria-describedby\": \"basic-addon2\",\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-primary\",\n      type: \"button\",\n      onClick: this.onCreate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 10\n      }\n    }, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\")))))));\n  }\n\n  addChatAdd(val) {\n    return val ? 'visible' : 'invisible';\n  }\n\n}","map":{"version":3,"sources":["/home/znjuko/Рабочий стол/rk2/bmstu_front/default-chat-golang/front/src/pages/OnlineUsers.js"],"names":["React","API","Card","OnlineUsers","Component","constructor","props","onInputChange","e","setState","chatName","target","value","onChange","console","log","checked","state","users","push","parseInt","index","indexOf","splice","length","showChatCreate","onCreate","event","preventDefault","post","history","error","response","render","online","map","user","login","id","addChatAdd","val"],"mappings":"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","sourcesContent":["import React from 'react';\nimport API from '../utils/API';\nimport { Card } from 'shards-react';\n\nexport default class OnlineUsers extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tusers: [],\n\t\t\tshowChatCreate: false,\n\t\t\tchatName: '',\n\t\t};\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className='list-group form'>\n\t\t\t\t\t{this.props.online.map((user, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName='d-flex mx-auto m-1 text-center p-2 align-middle list-group-item list-group-item-action'>\n\t\t\t\t\t\t\t\t<div className='d-flex justify-content-between align-items-center'>\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\tclassName='form-check-label'\n\t\t\t\t\t\t\t\t\t\thtmlFor='defaultCheck1'>\n\t\t\t\t\t\t\t\t\t\t{user.login}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName='form-check'\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\t\tvalue={user.id}\n\t\t\t\t\t\t\t\t\t\tid='defaultCheck1'\n\t\t\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName={`mt-4 d-flex ${this.addChatAdd(\n\t\t\t\t\t\tthis.state.showChatCreate,\n\t\t\t\t\t)}`}>\n\t\t\t\t\t<div className='card mb-3'>\n\t\t\t\t\t\t<div className='card-header'>Создать чат</div>\n\t\t\t\t\t\t<div className='card-body text-primary'>\n\t\t\t\t\t\t\t<div className='input-group mb-3'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tplaceholder='Название чата'\n\t\t\t\t\t\t\t\t\taria-label='Название чата'\n\t\t\t\t\t\t\t\t\taria-describedby='basic-addon2'\n\t\t\t\t\t\t\t\t\tonChange={this.onInputChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='input-group-append'>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-outline-primary'\n\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\tonClick={this.onCreate}>\n\t\t\t\t\t\t\t\t\t\tСоздать\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tonInputChange = (e) => {\n\t\tthis.setState({ chatName: e.target.value });\n\t};\n\n\tonChange = (e) => {\n\t\tconsole.log('show1');\n\t\tif (e.target.checked) {\n\t\t\tthis.state.users.push(parseInt(e.target.value));\n\t\t\tconsole.log('show2');\n\t\t\tconsole.log(this.state.users);\n\t\t} else {\n\t\t\tlet index = this.state.users.indexOf(parseInt(e.target.value));\n\t\t\tif (index > -1) {\n\t\t\t\tthis.state.users.splice(index, 1);\n\t\t\t}\n\t\t\tconsole.log('show3');\n\t\t\tconsole.log(this.state.users);\n\t\t}\n\n\t\tif (this.state.users.length > 0) {\n\t\t\tthis.setState({ showChatCreate: true });\n\t\t} else {\n\t\t\tthis.setState({ showChatCreate: false });\n\t\t}\n\t};\n\n\taddChatAdd(val) {\n\t\treturn val ? 'visible' : 'invisible';\n\t}\n\n\tonCreate = async (event) => {\n\t\tevent.preventDefault();\n\t\t// get our form data out of state\n\t\tconst { chatName, users } = this.state;\n\n\t\ttry {\n\t\t\tawait API.post('/chats', { chatName, users });\n\n\t\t\tconst { history } = this.props;\n\t\t\thistory.push('/login');\n\t\t\thistory.push('/chats');\n\t\t} catch (error) {\n\t\t\tconsole.log('[DEBUG]: Ответ сервера на /chats');\n\t\t\tconsole.log(error.response);\n\t\t}\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}