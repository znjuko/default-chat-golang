{"ast":null,"code":"var _jsxFileName = \"/home/znjuko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/rk2/bmstu_front/default-chat-golang/front/src/pages/Login.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Card } from 'shards-react';\nimport Input from '../mixins/input';\nimport Error from '../mixins/error';\nimport API from '../utils/API';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault(); // get our form data out of state\n\n      const {\n        login,\n        password\n      } = this.state;\n\n      try {\n        await API.post('/login', {\n          login,\n          password\n        });\n        const {\n          history\n        } = this.props;\n        history.push('/chats');\n      } catch (error) {\n        console.log('[DEBUG]: Ответ сервера на /login');\n        console.log(error.response);\n        this.setState({\n          err: error.response.status\n        });\n      }\n    };\n\n    this.state = {\n      login: '',\n      password: '',\n      err: ''\n    };\n  }\n\n  render() {\n    const {\n      isLoading\n    } = this.props;\n    const userDetails = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid d-inline-flex flex-column justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"display-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 5\n      }\n    }, \"\\u0412\\u0445\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      icon: \"far fa-user\",\n      type: \"text\",\n      placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n      name: \"login\",\n      onChange: this.onChange,\n      className: `form-control ${this.errorClass(this.state.err)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      icon: \"fas fa-key\",\n      type: \"password\",\n      placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      name: \"password\",\n      onChange: this.onChange,\n      className: `form-control ${this.errorClass(this.state.err)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(Error, {\n      err: \"\\u0423\\u043F\\u0441... \\u0422\\u0430\\u043A\\u043E\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D(\",\n      className: `text-danger ${this.errorHidClass(this.state.err)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid d-inline-flex justify-content-center ml-1 mr-1 mb-2 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary d-inline-flex mr-4 justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"registration\",\n      activeClassName: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 8\n      }\n    }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\")))));\n    const loadingMessage = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-flex m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 4\n      }\n    }, \"Loading...\");\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"mx-auto m-5 text-center p-5 align-middle\",\n      style: {\n        minWidth: '600px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 4\n      }\n    }, isLoading ? loadingMessage : userDetails);\n  }\n\n  errorClass(error) {\n    return error.length === 0 ? '' : 'border border-danger';\n  }\n\n  errorHidClass(error) {\n    return error.length === 0 ? 'invisible' : 'visible';\n  }\n\n}\n\nLogin.propTypes = {\n  isLoading: PropTypes.bool,\n  login: PropTypes.string,\n  password: PropTypes.string\n};\nexport default Login;","map":{"version":3,"sources":["/home/znjuko/Рабочий стол/rk2/bmstu_front/default-chat-golang/front/src/pages/Login.js"],"names":["React","PropTypes","Link","Card","Input","Error","API","Login","Component","constructor","onChange","e","setState","target","name","value","handleSubmit","event","preventDefault","login","password","state","post","history","props","push","error","console","log","response","err","status","render","isLoading","userDetails","errorClass","errorHidClass","loadingMessage","minWidth","length","propTypes","bool","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Link } from 'react-router-dom';\n\nimport { Card } from 'shards-react';\nimport Input from '../mixins/input';\nimport Error from '../mixins/error';\n\nimport API from '../utils/API';\n\nclass Login extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tlogin: '',\n\t\t\tpassword: '',\n\t\t\terr: '',\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { isLoading } = this.props;\n\t\tconst userDetails = (\n\t\t\t<div className='container-fluid d-inline-flex flex-column justify-content-center'>\n\t\t\t\t<h1 className='display-4 mb-4'>Вход</h1>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ticon='far fa-user'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tplaceholder='Логин'\n\t\t\t\t\t\tname='login'\n\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\tclassName={`form-control ${this.errorClass(\n\t\t\t\t\t\t\tthis.state.err,\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t/>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ticon='fas fa-key'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tplaceholder='Пароль'\n\t\t\t\t\t\tname='password'\n\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\tclassName={`form-control ${this.errorClass(\n\t\t\t\t\t\t\tthis.state.err,\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Error\n\t\t\t\t\t\terr='Упс... Такой пользователь не найден('\n\t\t\t\t\t\tclassName={`text-danger ${this.errorHidClass(\n\t\t\t\t\t\t\tthis.state.err,\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className='container-fluid d-inline-flex justify-content-center ml-1 mr-1 mb-2 '>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\tclassName='btn btn-primary d-inline-flex mr-4 justify-content-center'>\n\t\t\t\t\t\t\tВойти\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<Link to='registration' activeClassName='active'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\tclassName='btn btn-outline-info'>\n\t\t\t\t\t\t\t\tРегистрация\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\n\t\tconst loadingMessage = (\n\t\t\t<span className='d-flex m-auto'>Loading...</span>\n\t\t);\n\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tclassName='mx-auto m-5 text-center p-5 align-middle'\n\t\t\t\tstyle={{ minWidth: '600px' }}>\n\t\t\t\t{isLoading ? loadingMessage : userDetails}\n\t\t\t</Card>\n\t\t);\n\t}\n\n\tonChange = (e) => {\n\t\tthis.setState({ [e.target.name]: e.target.value });\n\t};\n\n\thandleSubmit = async (event) => {\n\t\tevent.preventDefault();\n\t\t// get our form data out of state\n\t\tconst { login, password } = this.state;\n\n\t\ttry {\n\t\t\tawait API.post('/login', { login, password });\n\t\t\tconst { history } = this.props;\n\n\t\t\thistory.push('/chats');\n\t\t} catch (error) {\n\t\t\tconsole.log('[DEBUG]: Ответ сервера на /login');\n\t\t\tconsole.log(error.response);\n\t\t\tthis.setState({ err: error.response.status });\n\t\t}\n\t};\n\n\terrorClass(error) {\n\t\treturn error.length === 0 ? '' : 'border border-danger';\n\t}\n\terrorHidClass(error) {\n\t\treturn error.length === 0 ? 'invisible' : 'visible';\n\t}\n}\n\nLogin.propTypes = {\n\tisLoading: PropTypes.bool,\n\tlogin: PropTypes.string,\n\tpassword: PropTypes.string,\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}